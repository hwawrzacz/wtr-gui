<form [formGroup]="form">
  <header>
    <h1>{{ stringId }}
      <div class="editable-input-wrapper title-wrapper">
        <mat-form-field appearance="outline" [attr.readonly]="!isEditable('title')">
          <input matInput type="text" formControlName="title" [readonly]="!isEditable('title')" />
        </mat-form-field>

        <button mat-icon-button *ngIf="!isEditable('title')" (click)="enableEdition('title')">
          <mat-icon>edit</mat-icon>
        </button>

        <button mat-icon-button color="primary" *ngIf="isEditable('title')" (click)="onSaveField('title')">
          <mat-icon>save</mat-icon>
        </button>

        <button mat-icon-button color="warn" *ngIf="isEditable('title')" (click)="onDiscardFieldChange('title')">
          <mat-icon>cancel</mat-icon>
        </button>
      </div>
    </h1>

    <button mat-stroked-button color="primary">
      <mat-icon>add</mat-icon>
      <span>Add task</span>
    </button>

    <button mat-stroked-button color="primary">
      <mat-icon>pie_chart</mat-icon>
      <span>Show staistics</span>
    </button>
  </header>

  <section>
    <h3>Manager</h3>
    <div class="editable-input-wrapper">
      <mat-form-field appearance="outline" [attr.readonly]="!isEditable('manager')">
        <input matInput *ngIf="!isEditable('manager')" readonly
          [value]="project ? stringifyManager(project.manager) : ''" />
        <mat-select *ngIf="isEditable('manager')" formControlName="manager">
          <!-- <div disabled>Loading data</div> -->
          <!-- <mat-option *ngFor="let manager of getManagers | async" [value]="manager.id">{{ manager.firstName + ' ' + manager.lastName | titlecase}}</mat-option> -->
          <mat-option [value]="1">Samuel L Jackson</mat-option>
          <mat-option [value]="2">John Travolta
          </mat-option>
          <mat-option [value]="3">John Lajoile</mat-option>
        </mat-select>
      </mat-form-field>

      <button mat-icon-button *ngIf="!isEditable('manager')" (click)="enableEdition('manager')">
        <mat-icon>edit</mat-icon>
      </button>

      <button mat-icon-button color="primary" *ngIf="isEditable('manager')" (click)="onSaveField('manager')">
        <mat-icon>save</mat-icon>
      </button>

      <button mat-icon-button color="warn" *ngIf="isEditable('manager')" (click)="onDiscardFieldChange('manager')">
        <mat-icon>cancel</mat-icon>
      </button>
    </div>
  </section>

  <section>
    <h3>Description</h3>
    <div class="editable-input-wrapper description-wrapper">
      <mat-form-field appearance="outline" [attr.readonly]="!isEditable('description')">
        <textarea matInput formControlName="description" [readonly]="!isEditable('description')"
          cdkTextareaAutosize></textarea>
      </mat-form-field>

      <button mat-icon-button *ngIf="!isEditable('description')" (click)="enableEdition('description')">
        <mat-icon>edit</mat-icon>
      </button>

      <button mat-icon-button color="primary" *ngIf="isEditable('description')" (click)="onSaveField('description')">
        <mat-icon>save</mat-icon>
      </button>

      <button mat-icon-button color="warn" *ngIf="isEditable('description')"
        (click)="onDiscardFieldChange('description')">
        <mat-icon>cancel</mat-icon>
      </button>
    </div>
  </section>

</form>

<section>
  <h3>Tasks</h3>
  <div class="tasks-list-wrapper">
    <app-project-tasks [projectId]="stringId"></app-project-tasks>
  </div>
</section>